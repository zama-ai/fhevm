name: "Fhevm Helm Charts Lint"

on:
  pull_request:
jobs:
  check-changes:
    permissions:
      actions: 'read'
      contents: 'read'
      pull-requests: 'read'
    runs-on: ubuntu-latest
    outputs:
      changes-charts: ${{ steps.filter.outputs.charts }}
    steps:
      - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2
      - uses: dorny/paths-filter@de90cc6fb38fc0963ad72b210f1f284cd68cea36  # v3.0.2
        id: filter
        with:
          filters: |
            charts:
              - '.github/workflows/charts-helm-lint.yml'
              - 'charts/**'
  charts-helm-lint:
    needs: check-changes
    if: ${{ needs.check-changes.outputs.changes-charts == 'true' }}
    runs-on: 'ubuntu-latest'
    steps:
      - uses: actions/checkout@a5ac7e51b41094c92402da3b24376905380afc29 # v4.1.6
      - name: Lint
        uses: WyriHaximus/github-action-helm3@fc4ba26e75cf5d08182c6ce3b72623c8bfd7272b # v3.1.0
        with:
          exec: helm lint charts/*
