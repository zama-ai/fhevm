# Example configuration for KMS Connector's `TransactionSender`

# Service name for tracing (optional, defaults to "kms-connector-tx-sender")
# ENV: KMS_CONNECTOR_SERVICE_NAME
# service_name = "kms-connector-tx-sender"

# Gateway HTTP RPC URL endpoint (required)
# ENV: KMS_CONNECTOR_GATEWAY_URL
gateway_url = "http://localhost:8545"

# Chain ID for the Gateway network (required)
# ENV: KMS_CONNECTOR_GATEWAY_CHAIN_ID
gateway_chain_id = 54321

# URL of the KMS Connector internal database (required)
# Format: see https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING-URIS
# ENV: KMS_CONNECTOR_DATABASE_URL
database_url = "postgres://postgres:postgres@localhost/kms-connector"

# Timeout for polling the database for responses (optional, defaults to 5 seconds)
# ENV: KMS_CONNECTOR_DATABASE_POLLING_TIMEOUT (format: https://docs.rs/humantime/latest/humantime/)
# database_polling_timeout = "5s"

# Private key as a hex string (optional if `aws_kms_config` is configured)
# If provided, the connector will use this private key
# Format: hex string with or without 0x prefix
# IMPORTANT: Keep this secure and never share it!
# ENV: KMS_CONNECTOR_PRIVATE_KEY
private_key = "0x3f45b129a7fd099146e9fe63851a71646231f7743c712695f3b2d2bf0e41c774"

# The endpoint used to monitor the connector components (optional, defaults to "0.0.0.0:9100")
# ENV: KMS_CONNECTOR_MONITORING_ENDPOINT
# monitoring_endpoint = "0.0.0.0:9100"

# The interval between updates of gauge metrics (optional, defaults to 10s)
# ENV: KMS_CONNECTOR_GAUGE_UPDATE_INTERVAL (format: https://docs.rs/humantime/latest/humantime/)
# gauge_update_interval = "10s"

# The timeout to perform each external service connection healthcheck (optional, defaults to 3s)
# ENV: KMS_CONNECTOR_HEALTHCHECK_TIMEOUT (format: https://docs.rs/humantime/latest/humantime/)
# healthcheck_timeout = "3s"

# The limit number of KMS Core responses to fetch from the database (optional, defaults to 50)
# ENV: KMS_CONNECTOR_RESPONSES_BATCH_SIZE
# responses_batch_size = 50

# Number of retries for transactions sent to the Gateway (optional, defaults to 4)
# ENV: KMS_CONNECTOR_TX_RETRIES
# tx_retries = 4

# Interval between retries for transactions sent to the Gateway (optional, defaults to 10ms)
# ENV: KMS_CONNECTOR_TX_RETRY_INTERVAL (format: https://docs.rs/humantime/latest/humantime/)
# tx_retry_interval = "10ms"

# Boolean to enable tracing of reverted transactions, using `debug_trace_transaction` RPC call (optional, defaults to true)
# ENV: KMS_CONNECTOR_TRACE_REVERTED_TX
# trace_reverted_tx = true

# The gas multiplier percentage after each transaction attempt (optional, defaults to 115%)
# ENV: KMS_CONNECTOR_GAS_MULTIPLIER_PERCENT
# gas_multiplier_percent = 115

# The maximum number of tasks to process events/responses concurrently (optional, defaults to 1000)
# ENV: KMS_CONNECTOR_TASK_LIMIT
# task_limit = 1000

# The interval between garbage collection runs (optional, defaults to 5m)
# ENV: KMS_CONNECTOR_GC_RUN_INTERVAL (format: https://docs.rs/humantime/latest/humantime/)
# gc_run_interval = "5m"

# The expiration time for completed/failed decryptions, after which they will be deleted (optional, defaults 24h)
# ENV: KMS_CONNECTOR_GC_DECRYPTION_EXPIRY (format: https://docs.rs/humantime/latest/humantime/)
# gc_decryption_expiry = "24h"

# The time limit for decryption to be under process, after which they will be considered as pending again (optional, defaults to 6m)
# ENV: KMS_CONNECTOR_GC_DECRYPTION_UNDER_PROCESS_LIMIT (format: https://docs.rs/humantime/latest/humantime/)
# gc_decryption_under_process_limit = "6m"

# Configuration of the Decryption contract (required)
[decryption_contract]
# Address of the Decryption contract (required)
# Format: hex string with 0x prefix
# ENV: KMS_CONNECTOR_DECRYPTION_CONTRACT__ADDRESS
address = "0x0000000000000000000000000000000000000000"
# EIP-712 domain name for Decryption contract (optional, defaults to "Decryption")
# ENV: KMS_CONNECTOR_DECRYPTION_CONTRACT__DOMAIN_NAME
# domain_name = "Decryption"
# EIP-712 domain version for Decryption contract (optional, defaults to "1")
# ENV: KMS_CONNECTOR_DECRYPTION_DOMAIN_VERSION
# domain_version = "1"

# Configuration of the KMSGeneration contract (required)
[kms_generation_contract]
# Address of the KMSGeneration contract (required)
# Format: hex string with 0x prefix
# ENV: KMS_CONNECTOR_KMS_GENERATION_CONTRACT__ADDRESS
address = "0x0000000000000000000000000000000000000000"
# EIP-712 domain name for KMSGeneration contract (optional, defaults to "KMSGeneration")
# ENV: KMS_CONNECTOR_KMS_GENERATION_CONTRACT__DOMAIN_NAME
# domain_name = "KMSGeneration"
# EIP-712 domain version for KMSGeneration contract (optional, defaults to "1")
# ENV: KMS_CONNECTOR_KMS_GENERATION_CONTRACT__DOMAIN_VERSION
# domain_version = "1"

# AWS KMS configuration (optional if `private_key` is configured)
# [aws_kms_config]
# AWS KMS key ID for signing
# ENV: KMS_CONNECTOR_AWS_KMS_CONFIG__KEY_ID
# key_id = "12345678-1234-1234-1234-123456789012"
# Optional: AWS region for KMS (if not using default from AWS credentials)
# ENV: KMS_CONNECTOR_AWS_KMS_CONFIG__REGION
# region = "us-east-1"
# Optional: AWS endpoint URL for KMS (for testing or custom endpoints)
# ENV: KMS_CONNECTOR_AWS_KMS_CONFIG__ENDPOINT
# endpoint = "https://kms.us-east-1.amazonaws.com"
