queue_rules:
  - name: main
    batch_size: 3
    batch_max_wait_time: 1m
    checks_timeout: 12h
    merge_method: squash
    update_method: rebase
    merge_conditions:
      - check-success = trigger-all-builds/trigger-builds
      - check-success = orchestrate-e2e-tests/run-e2e-tests
    queue_conditions:
      - base = main
      - label!=do-not-merge
pull_request_rules:
  - name: autoqueue-to-main
    description: Queue a PR for main when it matches the queue conditions
    conditions:
      - label=ready-to-merge
    actions:
      queue:

  - name: merge-queued-label
    description: Toggle the `merge-queued` label when a pull request is queued
    conditions:
      - queue-position > 0
    actions:
      label:
        toggle:
          - merge-queued

