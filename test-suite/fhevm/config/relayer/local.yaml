
gateway:
  blockchain_rpc:
    ws_url: "ws://localhost:8757"
    http_url: "http://localhost:8757"
    chain_id: 654321
    ws_health_check_timeout_secs: 5
    http_health_check_timeout_secs: 5
  listener:
    # Optional: set the starting block number for event subscriptions
    # last_block_number: null
    ws_reconnect_config:
      max_attempts: 20
      retry_interval_ms: 500
        # Number of parallel listener instances (1-3)
    listener_instances: 3
    # TTL for event deduplication cache in seconds (1-10)
    dedup_ttl_seconds: 5
    dedup_max_capacity: 100000
  tx_engine:
    private_key: GATEWAY_PRIVATE_KEY
    max_concurrency: 100
    retry:
      max_attempts: 100
      retry_interval_ms: 500
    tx_throttlers:
      input_proof:
        per_seconds: 20
        capacity: 11000
        safety_margin: 1000
      user_decrypt:
        per_seconds: 20
        capacity: 11000
        safety_margin: 1000
      public_decrypt:
        per_seconds: 20
        capacity: 11000
        safety_margin: 1000
    tx_throttler_per_secs: 20
    tx_throttler_capacity: 11000 # To allow actual capacity of 10k, after accounting for safety margin.
    tx_throttler_safety_margin: 1000
  readiness_checker:
    retry:
      max_attempts: 30
      retry_interval_ms: 2000
    public_decrypt:
      max_concurrency: 250
      capacity: 11000
      safety_margin: 1000
    user_decrypt:
      max_concurrency: 250
      capacity: 11000
      safety_margin: 1000
  contracts:
    decryption_address: "0xB8Ae44365c45A7C5256b14F607CaE23BC040c354"
    input_verification_address: "0xE61cff9C581c7c91AEF682c2C10e8632864339ab"
    user_decrypt_shares_threshold: 9
log:

  format: "compact"          # compact, pretty, or json
  show_file_line: true
  show_thread_ids: true
  show_timestamp: true
  show_target: true

keyurl:
    fhe_public_key:
      data_id: "fhe-public-key-data-id"
      url: "http://0.0.0.0:3001/publicKey.bin"
    crs:
      data_id: "crs-data-id"
      url: "http://0.0.0.0:3001/crs2048.bin"

http:
  endpoint: "0.0.0.0:3000"
  rate_limit_post_endpoints:
    requests_per_second: 30
    burst_size: 30
    retry_after_seconds: 5
    jitter_max_ms: 2000
  metrics:
    histogram_buckets: [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 40]
  api_retry_after_seconds: 4
  

metrics:
  endpoint: "0.0.0.0:9898"
  query_duration_histogram_bucket: [0.001, 0.005, 0.01, 0.025, 0.05, 0.1, 0.25, 0.5, 1.0, 2.5, 5.0, 10.0]
  pool_wait_duration_seconds_histogram_bucket: [0.0001, 0.001, 0.005, 0.01, 0.05, 0.1, 0.5, 1.0, 3.0]
  request_status_duration_histogram_bucket: [0.1, 0.25, 0.5, 1.0, 2.5, 5.0, 10.0, 30.0, 60.0, 300.0, 600.0, 1800.0, 3600.0]
  transaction_duration_secs_histogram_bucket: [0.01, 0.1, 0.25, 0.50, 0.75, 1.0, 1.25, 1.5, 2.0, 5.0, 10.0]

storage:
  sql_database_url: "postgresql://postgres:postgres@localhost:5433/relayer_db"
  app_pool:
    max_connections: 10
    min_connections: 2
    acquire_timeout_secs: 10
    idle_timeout_secs: 300
    max_lifetime_secs: 900
  cron_pool:
    max_connections: 5
    min_connections: 1
    acquire_timeout_secs: 30
    idle_timeout_secs: 600
    max_lifetime_secs: 1800
  sql_health_check_timeout_secs: 5
  cron:
    # 60s for interval check
    timeout_cron_interval: "60s" 
    # 30 mins timeout logic
    public_decrypt_timeout: "30m"
    user_decrypt_timeout: "30m"
    input_proof_timeout: "30m"
    # 1 hour interval for cleanup check
    expiry_cron_interval: "5m"
    # Retention Policies
    public_decrypt_expiry: "365d" # 1 year
    user_decrypt_expiry: "7d"
    input_proof_expiry: "7d"
    cron_startup_delay_after_recovery: "30s"