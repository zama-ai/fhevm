{
  "db_name": "PostgreSQL",
  "query": "\n                INSERT INTO dependence_chain(\n                    dependence_chain_id,\n                    status,\n                    last_updated_at,\n                    dependency_count,\n                    dependents,\n                    block_hash,\n                    block_height,\n                    schedule_priority\n                ) VALUES (\n                  $1, 'updated', $2::timestamp, $3, $4, $5, $6, $7\n                )\n                ON CONFLICT (dependence_chain_id) DO UPDATE\n                SET status = 'updated',\n                    last_updated_at = CASE\n                        WHEN dependence_chain.status = 'processed' THEN EXCLUDED.last_updated_at\n                        ELSE LEAST(dependence_chain.last_updated_at, EXCLUDED.last_updated_at)\n                    END,\n                    dependents = (\n                        SELECT ARRAY(\n                            SELECT DISTINCT d\n                            FROM unnest(dependence_chain.dependents || EXCLUDED.dependents) AS d\n                        )\n                    )\n                    ,\n                    schedule_priority = GREATEST(\n                        dependence_chain.schedule_priority,\n                        EXCLUDED.schedule_priority\n                    )\n                ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Bytea",
        "Timestamp",
        "Int4",
        "ByteaArray",
        "Bytea",
        "Int8",
        "Int2"
      ]
    },
    "nullable": []
  },
  "hash": "5e688c149b2b6ef8058c825005d732d7cc4de56aa53a2d9db77c0cef1766a420"
}
