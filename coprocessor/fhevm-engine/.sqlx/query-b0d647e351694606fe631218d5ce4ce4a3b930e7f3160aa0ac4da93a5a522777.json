{
  "db_name": "PostgreSQL",
  "query": "\n            UPDATE dependence_chain\n            SET\n                worker_id = NULL,\n                lock_acquired_at = NULL,\n                lock_expires_at = NULL,\n                last_updated_at = $4::timestamp,\n                schedule_lane = CASE\n                    WHEN status = 'processing' AND $3::bool THEN 0\n                    ELSE schedule_lane\n                END,\n                status = CASE\n                    WHEN status = 'processing' AND $3::bool THEN 'processed'       -- mark as processed\n                    WHEN status = 'processing' AND NOT $3::bool THEN 'updated'     -- revert to updated so it can be re-acquired\n                    ELSE status\n                END\n            WHERE worker_id = $1\n            AND dependence_chain_id = $2\n            ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Uuid",
        "Bytea",
        "Bool",
        "Timestamp"
      ]
    },
    "nullable": []
  },
  "hash": "b0d647e351694606fe631218d5ce4ce4a3b930e7f3160aa0ac4da93a5a522777"
}
